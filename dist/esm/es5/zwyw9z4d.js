/*! Built with http://stenciljs.com */
import{h}from"./wc-calendar.core.js";var Calendar=function(){function e(){this.languageCode="en",this.isSundayFirst=!1,this.showToolbar=!1,this.datePicker=!1,this.languages={en:{day_of_week_short:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],day_of_week:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]},de:{day_of_week_short:["Mo","Di","Mi","Do","Fr","Sa","So"],day_of_week:["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},bs:{day_of_week_short:["Pon","Uto","Sri","Čet","Pet","Sub","Ned"],day_of_week:["Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota","Nedjelja"],months:["Januar","Februar","Mart","April","Maj","Juni","Juli","Avgust","Septembar","Oktobar","Novembar","Decembar"]}},this.newDate=new Date,this.currentDay=this.newDate.getDate(),this.currentMonth=this.newDate.getMonth(),this.currentYear=this.newDate.getFullYear(),this.days=[],this.events=[],this.rangedDays=[],this.selectedDays=[],this.year=this.newDate.getFullYear(),this.month=this.newDate.getMonth(),this.showCalendar=!1,this.selectionType="day"}return e.prototype.selectDay=function(e,t,a){this.month=t,this.year=a,this.days=this._getCalendarDays(a,t),this._getCurrentMonthEvents(),this._selectDay({day:e,month:t+1,year:a})},e.prototype.showPreviousMonth=function(){this._showPreviousMonth()},e.prototype.showNextMonth=function(){this._showNextMonth()},e.prototype.changeYear=function(e){this._changeYear(e)},e.prototype.selectToday=function(){this.selectDay(this.currentDay,this.currentMonth,this.currentYear)},e.prototype.setEvents=function(e){this.days=this._getCalendarDays(this.year,this.month),this.events=e,this._getCurrentMonthEvents()},e.prototype.getEvents=function(){return this.events},e.prototype.getFullMonth=function(){return this.days},e.prototype.clearSelectedDay=function(){this.selectedDay=null,this.dayIndex=null},e.prototype.clearSelectedDays=function(){this.selectedDays=[]},e.prototype.clearPickedDate=function(){this.pickedDate=null},e.prototype.addEvent=function(e){this.events.push(e),this._getCurrentMonthEvents(),this.clearSelectedDay()},e.prototype.replaceEvent=function(e){var t=this._getDayIndex(this.events,e),a=this._getDayIndex(this.days,e);-1!==t&&-1!==a&&(this._removeEventData(t,a),this.events.push(e),this._getCurrentMonthEvents())},e.prototype.removeEvent=function(e){var t=this._getDayIndex(this.events,e),a=this._getDayIndex(this.days,e);-1!==t&&-1!==a&&this._removeEventData(a,t)},e.prototype.componentWillLoad=function(){this.isSundayFirst&&this.languages[this.languageCode||"en"].day_of_week_short.unshift(this.languages[this.languageCode||"en"].day_of_week_short.pop()),this.days=this._getCalendarDays(this.year,this.month),this._getCurrentMonthEvents()},e.prototype.normalizeDay=function(e){switch(e){case 0:return 6;case 1:return 0;case 2:return 1;case 3:return 2;case 4:return 3;case 5:return 4;case 6:return 5}},e.prototype._getCalendarDays=function(e,t){for(var a=new Date(e,t),n=this.isSundayFirst?a.getDay():this.normalizeDay(a.getDay()),s=new Date(e,t+1,0).getDate(),o=new Date(e,t,0),i=7*Math.ceil((s+n)/7),h=[],r=o.getDate()-n,c=0,d=0;d<i;d++){var l=d>s+n-1,y=d<n?{day:++r,month:this.month,year:a.getFullYear(),hasEvent:!1,data:[]}:{day:l?++c:d-n+1,month:l?this.month+2:this.month+1,year:a.getFullYear(),hasEvent:!1,data:[]};h.push(y)}return h},e.prototype._getRangedDays=function(e,t){for(var a=[],n=new Date(e.year,e.month-1,e.day),s=new Date(t.year,t.month-1,t.day),o=new Date(n);o<=s;o.setDate(o.getDate()+1)){var i={day:o.getDate(),month:o.getMonth()+1,year:o.getFullYear()};i.data=this._getTodayEvents(i),i.hasEvent=i.data.length>0,a.push(i)}return a},e.prototype._getTodayEvents=function(e){return this.events.filter(function(t){return t.day==e.day&&t.month==e.month&&t.year==e.year})},e.prototype._getCurrentMonthEvents=function(){for(var e=0;e<this.days.length;e++){var t=this._getTodayEvents(this.days[e]);t.length>0&&(this.days[e].data=t,this.days[e].hasEvent=!0)}},e.prototype._getDayIndex=function(e,t){var a=-1;return e.forEach(function(e,n){e.day==t.day&&e.month==t.month&&e.year==t.year&&(a=n)}),a},e.prototype._showPreviousMonth=function(){0===this.month?(--this.year,this.month=11):--this.month,this.days=this._getCalendarDays(this.year,this.month),this.selectedDay&&(this.dayIndex=this._getDayIndex(this.days,this.selectedDay)),this._getCurrentMonthEvents()},e.prototype._showNextMonth=function(){11===this.month?(++this.year,this.month=0):++this.month,this.days=this._getCalendarDays(this.year,this.month),this.selectedDay&&(this.dayIndex=this._getDayIndex(this.days,this.selectedDay)),this._getCurrentMonthEvents()},e.prototype._changeYear=function(e,t){this.year=e.target.value||t,this.month=0,this.days=this._getCalendarDays(this.year,this.month),this.selectedDay&&(this.dayIndex=this._getDayIndex(this.days,this.selectedDay)),this._getCurrentMonthEvents()},e.prototype._changeMonth=function(e){this.month=this.languages[this.languageCode].months.indexOf(e.target.value),this.days=this._getCalendarDays(this.year,this.month),this.selectedDay&&(this.dayIndex=this._getDayIndex(this.days,this.selectedDay)),this._getCurrentMonthEvents()},e.prototype._changeSelection=function(e){this.clearSelectedDay(),this.clearSelectedDays(),this.clearPickedDate(),this.selectionType=e.target.value},e.prototype._selectDay=function(e){var t=this;this.selectedDay===e?this.clearSelectedDay():(this.selectedDay=e,this.dayIndex=this._getDayIndex(this.days,this.selectedDay),this.onDaySelected.emit(e),this.datePicker&&(this.pickedDate=this._formatPicked(e),setTimeout(function(){return t.showCalendar=!1},100)))},e.prototype._selectMultiple=function(e){if(2===this.selectedDays.length&&(this.clearSelectedDays(),this.clearSelectedDay(),this.clearPickedDate()),this.selectedDay&&0===this.selectedDays.length)this.selectedDays.push(this.selectedDay);else{if(0===this.selectedDays.length)return this.selectedDays.push(e),void(this.pickedDate=this._formatPicked(this.selectedDays[0]));var t=new Date(e.year,e.month-1,e.day)<=new Date(this.selectedDays[0].year,this.selectedDays[0].month-1,this.selectedDays[0].day);1===this.selectedDays.length&&(t?this.selectedDays.unshift(e):this.selectedDays.push(e),this.pickedDate=this._formatPicked(this.selectedDays[0])+" - "+this._formatPicked(this.selectedDays[1]),this.rangedDays=this._getRangedDays(this.selectedDays[0],this.selectedDays[1]),this.onRangeSelected.emit(this.rangedDays))}},e.prototype._onAddEvent=function(){this.onAddEvent.emit({action:"event add",eventDay:this.selectedDay})},e.prototype._onReplaceEvent=function(){this.onReplaceEvent.emit({action:"event replace,",eventDay:this.selectedDay.data})},e.prototype._onRemoveEvent=function(){this.onRemoveEvent.emit({action:"event remove",eventDay:this.selectedDay.data})},e.prototype._removeEventData=function(e,t){this.days[e].data=[],this.days[e].hasEvent=!1,this.events.splice(t,1),this.clearSelectedDay()},e.prototype._switchCalendarBool=function(){this.showCalendar=!this.showCalendar},e.prototype._formatDate=function(e){return e<10?"0"+e:e.toString()},e.prototype._formatPicked=function(e){return this._formatDate(e.day)+"-"+this._formatDate(e.month)+"-"+e.year.toString()},e.prototype.render=function(){var e,t,a,n,s=this,o=[];return this.languages[this.languageCode].months.forEach(function(e){e===s.languages[s.languageCode].months[s.month]?o.push(h("option",{selected:!0,value:e},e)):o.push(h("option",{value:e},e))}),this.selectedDay&&(n=h("div",{class:"bc_toolbar-end"},h("button",{class:"bc_toolbar-action-button bc_button-success",onClick:function(){return s._onAddEvent()}},"Add event"),this.selectedDay.hasEvent?h("span",null,h("button",{class:"bc_toolbar-action-button bc_button-success",onClick:function(){return s._onReplaceEvent()}}," ","Replace event"),h("button",{class:"bc_toolbar-action-button bc_button-danger",onClick:function(){return s._onRemoveEvent()}},"Remove all events")):"")),this.showToolbar&&(a=h("div",null,h("div",{class:"bc_calendar-toolbar-top"},h("div",{class:"bc_toolbar-start"},h("button",{class:"bc_toolbar-button",onClick:function(){return s.selectToday()}},"Today")),n),h("div",{class:"bc_calendar-toolbar-bottom"},h("select",{class:"bc_selection-select",onChange:function(e){return s._changeSelection(e)}},h("option",{value:"day",selected:!0},"Day"),h("option",{value:"range"},"Range"))))),e=h("div",{class:"bc_calendar-container"},h("div",{class:"bc_calendar-header"},h("div",{class:"bc_header-left",onClick:function(){return s._showPreviousMonth()}},h("button",{class:"bc_nav-button-left"})),h("div",{class:"bc_header-year"},h("select",{class:"bc_header-month-select",onChange:function(e){return s._changeMonth(e)}},o),h("input",{class:"bc_year-input-number",type:"number",value:this.year,onChange:function(e){return s._changeYear(e)}})),h("div",{class:"bc_header-right",onClick:function(){return s._showNextMonth()}},h("button",{class:"bc_nav-button-right"}))),h("div",{class:"bc_calendar-days bc_calendar-days-name"},this.languages[this.languageCode||"en"].day_of_week_short.map(function(e){return h("div",{class:"bc_day-name"},e)})),h("div",{class:"bc_calendar-days"},this.days.map(function(e){return h("div",{class:(s.days.indexOf(e)==s.dayIndex||e===s.selectedDays[0]?"bc_active-day":"")+(e===s.selectedDays[1]?"bc_range-end-day":""),onClick:function(){return"range"!==s.selectionType?s._selectDay(e):s._selectMultiple(e)}},h("span",{class:(e.month!==s.month+1?"bc_muted-day":"")+(e.day===s.currentDay&&e.month===s.currentMonth+1&&e.year===s.currentYear?"bc_current-day":"")},e.day,h("span",{class:e.hasEvent?"bc_day-event-dot":""})))})),a),t=h("div",{class:"bc_date-picker"},h("div",{class:"bc_input-with-icon",onClick:function(){return s._switchCalendarBool()}},h("input",{type:"text",value:this.pickedDate,disabled:!0,class:"bc_date-picker-input"}),h("i",{class:"bc_calendar-icon"})),h("div",{class:"calendar-dropdown"},this.showCalendar?e:"")),h("div",null,this.datePicker?t:e)},Object.defineProperty(e,"is",{get:function(){return"bind-calendar-picker"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{addEvent:{method:!0},changeYear:{method:!0},clearPickedDate:{method:!0},clearSelectedDay:{method:!0},clearSelectedDays:{method:!0},datePicker:{type:Boolean,attr:"date-picker"},dayIndex:{state:!0},days:{state:!0},events:{state:!0},getEvents:{method:!0},getFullMonth:{method:!0},isSundayFirst:{type:Boolean,attr:"is-sunday-first"},languageCode:{type:String,attr:"language-code"},languages:{state:!0},month:{state:!0},pickedDate:{state:!0},rangedDays:{state:!0},removeEvent:{method:!0},replaceEvent:{method:!0},selectDay:{method:!0},selectedDay:{state:!0},selectedDays:{state:!0},selectionType:{state:!0},selectToday:{method:!0},setEvents:{method:!0},showCalendar:{state:!0},showNextMonth:{method:!0},showPreviousMonth:{method:!0},showToolbar:{type:Boolean,attr:"show-toolbar"},year:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"events",{get:function(){return[{name:"onDaySelected",method:"onDaySelected",bubbles:!0,cancelable:!0,composed:!0},{name:"onRangeSelected",method:"onRangeSelected",bubbles:!0,cancelable:!0,composed:!0},{name:"onAddEvent",method:"onAddEvent",bubbles:!0,cancelable:!0,composed:!0},{name:"onReplaceEvent",method:"onReplaceEvent",bubbles:!0,cancelable:!0,composed:!0},{name:"onRemoveEvent",method:"onRemoveEvent",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return".bc_calendar-container{margin:0 auto;background-color:#fff;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;padding:16px}.bc_calendar-header{display:grid;grid-template-columns:15% 70% 15%;margin-bottom:18px}.bc_header-year{text-align:center;font-size:1.2em;font-family:\"Ubuntu Regular\";color:#4b4b4b}.bc_header-right{text-align:right}.bc_nav-button-left,.bc_nav-button-right{background-color:transparent;border:none;outline:0;cursor:pointer}.bc_nav-button-left:focus,.bc_nav-button-right:focus{border:none;outline:0}.bc_nav-button-left{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNMjE3LjkgMjU2TDM0NSAxMjljOS40LTkuNCA5LjQtMjQuNiAwLTMzLjktOS40LTkuNC0yNC42LTkuMy0zNCAwTDE2NyAyMzljLTkuMSA5LjEtOS4zIDIzLjctLjcgMzMuMUwzMTAuOSA0MTdjNC43IDQuNyAxMC45IDcgMTcgN3MxMi4zLTIuMyAxNy03YzkuNC05LjQgOS40LTI0LjYgMC0zMy45TDIxNy45IDI1NnoiLz48L3N2Zz4=);background-repeat:no-repeat;width:25px;height:25px;cursor:pointer}.bc_nav-button-right{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNMjk0LjEgMjU2TDE2NyAxMjljLTkuNC05LjQtOS40LTI0LjYgMC0zMy45czI0LjYtOS4zIDM0IDBMMzQ1IDIzOWM5LjEgOS4xIDkuMyAyMy43LjcgMzMuMUwyMDEuMSA0MTdjLTQuNyA0LjctMTAuOSA3LTE3IDdzLTEyLjMtMi4zLTE3LTdjLTkuNC05LjQtOS40LTI0LjYgMC0zMy45bDEyNy0xMjcuMXoiLz48L3N2Zz4=);background-repeat:no-repeat;width:25px;height:25px;cursor:pointer}.bc_header-month-select,.bc_selection-select{border:0;outline:0;font-size:1em;background-color:#f3f3f3;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;cursor:pointer!important}.bc_selection-select{width:100%;padding:4px;border-radius:4px}.bc_header-month-select{margin-right:10px}.bc_header-month{font-family:\"Ubuntu Regular\";margin-right:4px}.bc_year-input-number{display:inline-block;width:3.3em;border:none;background-color:transparent;font-family:\"Ubuntu Medium\";font-size:1em;font-weight:600;color:#4a4a4c}.bc_calendar-days-name{margin-bottom:20px}.bc_day-name{font-family:\"Ubuntu Regular\";font-weight:600;text-align:center;color:#4b4b4b}.bc_calendar-days{display:grid;grid-template-columns:repeat(7,1fr);grid-auto-rows:1fr;grid-gap:8px;margin-bottom:10px;text-align:center}.bc_calendar-days>div{font-family:\"Ubuntu Light\";padding:4px;cursor:pointer}.bc_active-day{background-color:#00da79;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;color:#fff}.bc_active-day .bc_current-day,.bc_active-day .bc_muted-day{color:#fff!important}.bc_range-end-day{background-color:#f55b5b;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;color:#fff}.bc_range-end-day .bc_current-day,.bc_range-end-day .bc_muted-day{color:#fff!important}.bc_muted-day{color:#adadad}.bc_day-event-dot{height:5px;width:5px;background-color:#00ffb8;border-radius:50%;display:block;position:relative;left:80%;top:-20px}\@media (min-width:440px){.bc_day-event-dot{left:6.65vw}}\@media (min-width:1150px){.bc_day-event-dot{left:6.95vw}}.bc_current-day{color:#00da79!important}.bc_toolbar-action-button,.bc_toolbar-button{background-color:#e5e5e5;color:#4b4b4b;padding:6px;border-radius:4px;border:none;font-size:.8em}.bc_toolbar-action-button:active,.bc_toolbar-button:active{background-color:#d6d6d6}.bc_calendar-toolbar-top{display:grid;grid-template-columns:10% 90%;border-top:1px solid #e5e5e5;border-bottom:1px solid #e5e5e5;padding:6px 0 6px 0;margin-bottom:10px}.bc_calendar-toolbar-bottom{width:100%}.bc_toolbar-action-button{margin-left:4px}.bc_toolbar-end{text-align:right}.bc_button-danger{background-color:#f55b5b;color:#fff}.bc_button-danger:active{background-color:#f56a6c}.bc_button-success{background-color:#21da9c;color:#fff}.bc_button-success:active{background-color:#22e2a2}.bc_date-picker{margin:16px 0 16px 0}input[type=text].bc_date-picker-input{width:100%;background-color:#fff;border:2px solid #aaa;border-radius:4px;margin:8px 0;outline:0;padding:8px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-transition:.3s;transition:.3s;cursor:pointer}input[type=text].bc_date-picker-input:focus{border-color:#1e90ff;-webkit-box-shadow:0 0 8px 0 #1e90ff;box-shadow:0 0 8px 0 #1e90ff}.bc_input-with-icon input[type=text].bc_date-picker-input{padding-right:40px}.bc_input-with-icon{position:relative}.bc_input-with-icon i{position:absolute;right:0;top:8px;padding:9px 8px;color:#aaa;-webkit-transition:.3s;transition:.3s}.bc_input-with-icon input[type=text].bc_date-picker-input:focus+i{color:#1e90ff}.bc_calendar-icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNMzY4LjAwNSAyNzJoLTk2djk2aDk2di05NnptLTMyLTIwOHYzMmgtMTYwVjY0aC00OHYzMmgtMjQuMDFjLTIyLjAwMiAwLTQwIDE3Ljk5OC00MCA0MHYyNzJjMCAyMi4wMDIgMTcuOTk4IDQwIDQwIDQwaDMwNC4wMWMyMi4wMDIgMCA0MC0xNy45OTggNDAtNDBWMTM2YzAtMjIuMDAyLTE3Ljk5OC00MC00MC00MGgtMjRWNjRoLTQ4em03MiAzNDRoLTMwNC4wMVYxOTZoMzA0LjAxdjIxMnoiLz48L3N2Zz4=);background-repeat:no-repeat;margin:8px;width:10px;cursor:pointer}"},enumerable:!0,configurable:!0}),e}();export{Calendar as BindCalendarPicker};